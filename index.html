<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PathfinderAI â€” Find Your UK University Programme</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='8' fill='%2300B4D8'/><text x='50%25' y='55%25' text-anchor='middle' dominant-baseline='middle' font-family='sans-serif' font-weight='800' font-size='18' fill='white'>P</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--navy:#0B1D2E;--navy-light:#132D46;--navy-mid:#1A3A5C;--teal:#00B4D8;--teal-dark:#0096B4;--amber:#F4A940;--bg:#F3F6FA;--card:#FFFFFF;--text:#1A2B3C;--text-light:#5A6B7C;--text-muted:#8A9BAC;--border:#E2E8F0;--green:#059669;--green-bg:#D1FAE5;--amber-bg:#FEF3C7;--red:#DC2626;--red-bg:#FEE2E2;--blue-bg:#E0F2FE;--purple-bg:#F3E8FF}
body{font-family:'Sora',sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
.app{width:100%;min-height:100vh;background:var(--bg)}
.onboarding{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(150deg,var(--navy) 0%,var(--navy-light) 40%,var(--navy-mid) 100%);padding:20px;position:relative;overflow:hidden}
.onboarding::before{content:'';position:absolute;top:-40%;right:-20%;width:70%;height:140%;background:radial-gradient(ellipse,rgba(0,180,216,0.07) 0%,transparent 65%);pointer-events:none}
.ob-card{background:rgba(255,255,255,0.025);backdrop-filter:blur(24px);border:1px solid rgba(255,255,255,0.07);border-radius:28px;padding:44px 48px;max-width:580px;width:100%;position:relative;z-index:1}
@media(max-width:640px){.ob-card{padding:28px 24px;border-radius:20px}}
.logo-row{display:flex;align-items:center;gap:11px;margin-bottom:10px}
.logo-sq{width:38px;height:38px;background:linear-gradient(135deg,var(--teal),var(--amber));border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px;color:#fff;font-weight:800}
.logo-t{font-size:22px;font-weight:700;color:#fff;letter-spacing:-0.5px}
.logo-hi{color:var(--teal)}
.ob-badge{display:inline-block;background:rgba(0,180,216,0.12);color:var(--teal);font-size:11px;font-weight:600;padding:4px 10px;border-radius:6px;margin-bottom:20px;letter-spacing:0.5px}
.ob-sub{font-size:13.5px;color:rgba(255,255,255,0.45);line-height:1.65;margin-bottom:32px}
.fg{margin-bottom:18px}
.fl{display:block;font-size:11px;font-weight:600;color:rgba(255,255,255,0.6);text-transform:uppercase;letter-spacing:1.2px;margin-bottom:7px}
.fi,.fs{width:100%;padding:11px 15px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:11px;color:#fff;font-family:'Sora',sans-serif;font-size:13.5px;outline:none;transition:border 0.2s}
.fi:focus,.fs:focus{border-color:var(--teal)}
.fi::placeholder{color:rgba(255,255,255,0.25)}
.fs option{background:var(--navy);color:#fff}
.fr{display:grid;grid-template-columns:1fr 1fr;gap:14px}
@media(max-width:500px){.fr{grid-template-columns:1fr}}
.chips{display:flex;flex-wrap:wrap;gap:7px}
.chip{padding:7px 15px;border-radius:20px;font-size:12.5px;font-weight:500;border:1px solid rgba(255,255,255,0.13);color:rgba(255,255,255,0.6);cursor:pointer;transition:all 0.2s;background:transparent;font-family:'Sora',sans-serif}
.chip:hover{border-color:var(--teal);color:#fff}
.chip.on{background:rgba(0,180,216,0.13);border-color:var(--teal);color:var(--teal)}
.go-btn{width:100%;padding:14px;border-radius:12px;border:none;background:linear-gradient(135deg,var(--teal),var(--teal-dark));color:#fff;font-family:'Sora',sans-serif;font-size:14.5px;font-weight:600;cursor:pointer;transition:all 0.3s;margin-top:10px}
.go-btn:hover{transform:translateY(-1px);box-shadow:0 8px 28px rgba(0,180,216,0.28)}
.go-btn:disabled{opacity:0.35;cursor:not-allowed;transform:none;box-shadow:none}
.chat{display:flex;flex-direction:column;height:100vh}
.ch-head{display:flex;align-items:center;justify-content:space-between;padding:14px 22px;background:var(--navy);flex-shrink:0;flex-wrap:wrap;gap:8px}
.ch-left{display:flex;align-items:center;gap:10px}
.ch-logo{width:30px;height:30px;background:linear-gradient(135deg,var(--teal),var(--amber));border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;color:#fff;font-weight:800}
.ch-title{font-size:15px;font-weight:600;color:#fff}
.ch-tags{display:flex;gap:8px;font-size:11px;color:rgba(255,255,255,0.45);flex-wrap:wrap}
.ch-tag{background:rgba(255,255,255,0.06);padding:3px 9px;border-radius:5px}
.ch-trust{background:rgba(5,150,105,0.15);color:#34D399;padding:3px 9px;border-radius:5px;font-weight:600;font-size:10px;letter-spacing:0.5px}
.ch-back{background:none;border:1px solid rgba(255,255,255,0.15);color:rgba(255,255,255,0.5);padding:4px 10px;border-radius:6px;font-family:'Sora',sans-serif;font-size:11px;cursor:pointer;transition:all 0.2s;margin-right:4px}
.ch-back:hover{border-color:var(--teal);color:var(--teal)}
.ch-msgs{flex:1;overflow-y:auto;padding:20px 22px;display:flex;flex-direction:column;gap:14px}
.msg{max-width:88%;animation:fadeUp 0.3s ease}
@media(max-width:640px){.msg{max-width:96%}}
@keyframes fadeUp{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.msg.a{align-self:flex-start}.msg.u{align-self:flex-end}
.msg-who{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:5px;color:var(--text-muted)}
.msg.u .msg-who{text-align:right}
.bubble{padding:13px 17px;border-radius:16px;font-size:13.5px;line-height:1.7}
.msg.a .bubble{background:var(--card);border:1px solid var(--border);border-bottom-left-radius:4px;box-shadow:0 1px 3px rgba(0,0,0,0.03)}
.msg.u .bubble{background:var(--navy);color:#fff;border-bottom-right-radius:4px}
.pcards{display:flex;flex-direction:column;gap:14px;margin-top:14px}
.pcard{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;transition:all 0.25s}
.pcard:hover{border-color:var(--teal);box-shadow:0 6px 24px rgba(0,180,216,0.08)}
.pc-top{padding:16px 18px 12px}
.pc-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:3px}
.pc-uni{font-size:11px;font-weight:600;color:var(--teal);text-transform:uppercase;letter-spacing:0.6px}
.pc-rank{font-size:10.5px;color:var(--text-muted);background:var(--bg);padding:2px 8px;border-radius:4px}
.pc-name{font-size:15px;font-weight:600;color:var(--text);margin-bottom:8px;line-height:1.3}
.pc-tags{display:flex;flex-wrap:wrap;gap:5px}
.pc-tag{font-size:10.5px;padding:3px 8px;border-radius:6px;font-weight:500}
.t-fee{background:var(--amber-bg);color:#92400E}.t-city{background:var(--blue-bg);color:#0369A1}.t-dur{background:var(--purple-bg);color:#6B21A8}.t-fnd{background:var(--green-bg);color:#065F46}
.pc-elig{display:flex;align-items:center;gap:6px;padding:7px 12px;margin:8px 18px 0;border-radius:8px;font-size:11.5px;font-weight:600}
.elig-direct{background:var(--green-bg);color:var(--green)}.elig-cond{background:var(--amber-bg);color:#D97706}.elig-below{background:var(--red-bg);color:var(--red)}.elig-unk{background:var(--bg);color:var(--text-muted)}
.pc-tabs{display:flex;border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
.pc-tab{flex:1;padding:8px;text-align:center;font-size:10.5px;font-weight:600;color:var(--text-muted);cursor:pointer;transition:all 0.2s;letter-spacing:0.3px;background:transparent;border:none;font-family:'Sora',sans-serif;border-bottom:2px solid transparent}
.pc-tab:hover{color:var(--text)}.pc-tab.on{color:var(--teal);border-bottom-color:var(--teal)}
.pc-panel{padding:14px 18px}
.pc-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}
@media(max-width:500px){.pc-stats{grid-template-columns:repeat(2,1fr)}}
.ps{text-align:center}.ps-v{font-size:17px;font-weight:700;color:var(--navy)}.ps-l{font-size:9.5px;color:var(--text-muted);margin-top:1px}
.slm-box{background:linear-gradient(135deg,#F0FDFA,#ECFDF5);border:1px solid #A7F3D0;border-radius:10px;padding:12px 14px}
.slm-title{font-size:11px;font-weight:700;color:var(--green);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:8px;display:flex;align-items:center;gap:6px}
.slm-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:8px}
.slm-stat{text-align:center}.slm-v{font-size:15px;font-weight:700;color:#065F46}.slm-l{font-size:9px;color:#047857}
.slm-note{font-size:11.5px;color:#065F46;line-height:1.5;font-style:italic}
.tc-box{background:linear-gradient(135deg,#FFFBEB,#FEF9E7);border:1px solid #FDE68A;border-radius:10px;padding:12px 14px}
.tc-title{font-size:11px;font-weight:700;color:#92400E;text-transform:uppercase;letter-spacing:0.8px;margin-bottom:10px;display:flex;align-items:center;gap:6px}
.tc-rows{display:flex;flex-direction:column;gap:4px}
.tc-row{display:flex;justify-content:space-between;font-size:12px;color:#78350F;padding:2px 0}
.tc-row.sub{padding-left:12px;color:#A16207;font-size:11.5px}
.tc-divider{border-top:1px dashed #FDE68A;margin:4px 0}
.tc-total{font-weight:700;font-size:13.5px;color:#78350F}
.tc-schol{margin-top:8px;padding:6px 10px;background:rgba(5,150,105,0.08);border-radius:6px;font-size:11px;color:var(--green);display:flex;align-items:center;gap:5px}
.ch-input{padding:14px 22px;background:var(--card);border-top:1px solid var(--border);flex-shrink:0}
.in-row{display:flex;gap:9px}
.in-box{flex:1;padding:11px 15px;border:1px solid var(--border);border-radius:11px;font-family:'Sora',sans-serif;font-size:13.5px;outline:none;background:var(--bg);transition:border 0.2s}
.in-box:focus{border-color:var(--teal)}
.in-btn{padding:11px 18px;border-radius:11px;border:none;background:var(--navy);color:#fff;font-family:'Sora',sans-serif;font-size:13.5px;font-weight:600;cursor:pointer;transition:background 0.2s;white-space:nowrap}
.in-btn:hover{background:var(--navy-light)}.in-btn:disabled{opacity:0.4;cursor:not-allowed}
.quicks{display:flex;flex-wrap:wrap;gap:7px;margin-top:9px}
.qb{padding:5px 13px;border-radius:18px;border:1px solid var(--border);background:var(--card);font-family:'Sora',sans-serif;font-size:11.5px;color:var(--text-light);cursor:pointer;transition:all 0.2s}
.qb:hover{border-color:var(--teal);color:var(--teal)}
.typing{display:flex;gap:4px;padding:13px 17px;background:var(--card);border:1px solid var(--border);border-radius:16px;border-bottom-left-radius:4px;width:fit-content}
.td{width:6px;height:6px;background:var(--text-muted);border-radius:50%;animation:tb 1.2s infinite}
.td:nth-child(2){animation-delay:0.2s}.td:nth-child(3){animation-delay:0.4s}
@keyframes tb{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-5px)}}
.footer{padding:6px 22px 8px;background:var(--card);border-top:1px solid var(--border);text-align:center;font-size:10px;color:var(--text-muted);flex-shrink:0}
.footer a{color:var(--teal);text-decoration:none}
.err-box{margin:8px 0;padding:12px 16px;background:var(--red-bg);border:1px solid #FECACA;border-radius:10px;color:var(--red);font-size:12px}

/* Homepage v2.1 â€” Dark Cinematic */
.hp{width:100%;min-height:100vh;background:#0A0F1C;overflow-x:hidden;color:#F0F2F5}

/* Scroll animations */
.hp-anim{opacity:0;transform:translateY(24px);transition:opacity 0.7s ease-out,transform 0.7s ease-out}
.hp-anim.hp-visible{opacity:1;transform:translateY(0)}
.hp-anim-delay-1{transition-delay:0.1s}.hp-anim-delay-2{transition-delay:0.2s}.hp-anim-delay-3{transition-delay:0.3s}.hp-anim-delay-4{transition-delay:0.4s}

/* Sticky nav */
.hp-snav{position:fixed;top:0;left:0;right:0;z-index:100;padding:14px 32px;background:rgba(10,15,28,0.85);backdrop-filter:blur(16px);border-bottom:1px solid rgba(255,255,255,0.06);display:flex;align-items:center;justify-content:space-between;max-width:100%;opacity:0;transform:translateY(-100%);transition:opacity 0.35s,transform 0.35s;pointer-events:none}
.hp-snav.hp-snav-show{opacity:1;transform:translateY(0);pointer-events:all}
.hp-snav-inner{display:flex;align-items:center;justify-content:space-between;max-width:1200px;margin:0 auto;width:100%}
.hp-snav-logo{display:flex;align-items:center;gap:9px}
.hp-snav-sq{width:30px;height:30px;background:linear-gradient(135deg,#00D4FF,#FFB547);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;color:#fff;font-weight:800}
.hp-snav-t{font-size:17px;font-weight:700;color:#F0F2F5;letter-spacing:-0.3px}
.hp-snav-t .hi{color:#00D4FF}
.hp-snav-links{display:flex;align-items:center;gap:20px}
.hp-snav-link{font-size:13px;color:#94A3B8;background:none;border:none;font-family:'Sora',sans-serif;cursor:pointer;transition:color 0.2s}
.hp-snav-link:hover{color:#00D4FF}

/* Act 1: The Hook */
.hp-act1{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:40px 32px;background:linear-gradient(170deg,#0A0F1C 0%,#0B1A2E 40%,#0F1629 100%);position:relative;overflow:hidden}
.hp-act1::before{content:'';position:absolute;top:30%;left:50%;width:600px;height:600px;transform:translate(-50%,-50%);background:radial-gradient(circle,rgba(0,212,255,0.04) 0%,transparent 70%);pointer-events:none}
.hp-hook{font-size:64px;font-weight:700;color:#F0F2F5;line-height:1.05;letter-spacing:-2px;margin-bottom:48px;text-shadow:0 0 80px rgba(0,212,255,0.08)}
@media(max-width:768px){.hp-hook{font-size:36px;letter-spacing:-1px;margin-bottom:32px}}
.hp-inline{display:flex;align-items:center;justify-content:center;gap:10px;flex-wrap:wrap;font-size:20px;color:#94A3B8;margin-bottom:36px}
@media(max-width:768px){.hp-inline{font-size:16px;gap:8px}}
.hp-inline-sel{background:transparent;border:none;border-bottom:2px solid rgba(0,212,255,0.3);color:#00D4FF;font-family:'Sora',sans-serif;font-size:20px;font-weight:600;padding:4px 2px;outline:none;cursor:pointer;transition:border-color 0.2s;-webkit-appearance:none;appearance:none}
@media(max-width:768px){.hp-inline-sel{font-size:16px}}
.hp-inline-sel:hover,.hp-inline-sel:focus{border-color:#00D4FF}
.hp-inline-sel option{background:#0A0F1C;color:#F0F2F5;font-size:15px}
.hp-go{padding:16px 40px;border-radius:12px;border:none;background:linear-gradient(135deg,#00D4FF,#0096B4);color:#fff;font-family:'Sora',sans-serif;font-size:17px;font-weight:600;cursor:pointer;transition:all 0.3s;opacity:0;transform:translateY(8px);pointer-events:none}
.hp-go.hp-go-show{opacity:1;transform:translateY(0);pointer-events:all}
.hp-go:hover{transform:translateY(-2px);box-shadow:0 12px 40px rgba(0,212,255,0.3)}
.hp-powered{font-size:13px;color:#64748B;margin-top:40px}

/* Act 2: Data Story */
.hp-act2{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:100px 32px;background:#0F1629;text-align:center;position:relative}
@media(max-width:768px){.hp-act2{padding:64px 20px;min-height:auto}}
.hp-act2-head{font-size:32px;font-weight:600;color:#F0F2F5;margin-bottom:56px;line-height:1.2;letter-spacing:-0.5px}
@media(max-width:768px){.hp-act2-head{font-size:22px;margin-bottom:36px}}
.hp-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:32px;max-width:900px;margin:0 auto 48px}
@media(max-width:768px){.hp-stats{grid-template-columns:repeat(2,1fr);gap:20px}}
.hp-stat{padding:24px 16px}
.hp-stat-val{font-size:48px;font-weight:700;line-height:1;margin-bottom:10px;text-shadow:0 0 40px currentColor}
@media(max-width:768px){.hp-stat-val{font-size:32px}}
.hp-stat-val.teal{color:#00D4FF}.hp-stat-val.green{color:#34D399}.hp-stat-val.amber{color:#FFB547}
.hp-stat-lab{font-size:14px;color:#94A3B8;line-height:1.5}
@media(max-width:768px){.hp-stat-lab{font-size:12px}}
.hp-act2-note{font-size:14px;color:#64748B;max-width:600px;margin:0 auto;line-height:1.6}

/* Act 3: The Stakes */
.hp-act3{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:100px 32px;background:#0A0F1C;text-align:center}
@media(max-width:768px){.hp-act3{padding:64px 20px;min-height:auto}}
.hp-act3-head{font-size:36px;font-weight:700;color:#F0F2F5;margin-bottom:12px;letter-spacing:-0.5px;line-height:1.15}
@media(max-width:768px){.hp-act3-head{font-size:24px}}
.hp-act3-sel{display:flex;align-items:center;justify-content:center;gap:8px;flex-wrap:wrap;font-size:17px;color:#94A3B8;margin-bottom:36px;line-height:1.6}
.hp-act3-sel select{background:transparent;border:none;border-bottom:2px solid rgba(0,212,255,0.3);color:#00D4FF;font-family:'Sora',sans-serif;font-size:17px;font-weight:600;padding:3px 2px;outline:none;cursor:pointer;transition:border-color 0.2s;-webkit-appearance:none;appearance:none}
.hp-act3-sel select:hover,.hp-act3-sel select:focus{border-color:#00D4FF}
.hp-act3-sel select option{background:#0A0F1C;color:#F0F2F5;font-size:14px}
@media(max-width:768px){.hp-act3-sel{font-size:15px;margin-bottom:24px}.hp-act3-sel select{font-size:15px}}
.hp-vmap{position:relative;width:100%;max-width:800px;height:420px;margin:0 auto 48px;border-radius:20px;background:#0F1629;border:1px solid rgba(255,255,255,0.06)}
.hp-vmap::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,rgba(52,211,153,0.04) 0%,transparent 50%,rgba(248,113,113,0.03) 100%);pointer-events:none}
.hp-vmap-axis{position:absolute;top:8%;left:8%;width:84%;height:84%;border-left:1px dashed rgba(255,255,255,0.06);border-bottom:1px dashed rgba(255,255,255,0.06);pointer-events:none}
.hp-vmap-axis-x{position:absolute;bottom:4%;left:50%;transform:translateX(-50%);font-size:10px;color:#475569;letter-spacing:1px;text-transform:uppercase}
.hp-vmap-axis-y{position:absolute;top:50%;left:2%;transform:translateY(-50%) rotate(-90deg);font-size:10px;color:#475569;letter-spacing:1px;text-transform:uppercase;transform-origin:center}
@media(max-width:768px){.hp-vmap{height:320px}}
.hp-vmap-label{position:absolute;font-size:11px;color:#64748B;font-weight:500;letter-spacing:0.5px}
.hp-vmap-label.tl{top:16px;left:20px}.hp-vmap-label.br{bottom:16px;right:20px}
.hp-vmap-zone{position:absolute;top:10%;left:5%;width:45%;height:45%;background:radial-gradient(ellipse,rgba(52,211,153,0.08) 0%,transparent 70%);border-radius:50%;pointer-events:none}
.hp-vmap-bubble{position:absolute;padding:6px 10px;border-radius:10px;text-align:center;line-height:1.3;opacity:0;transform:scale(0.75) translateY(8px);transition:opacity 0.5s ease-out,transform 0.5s ease-out;cursor:default}
.hp-vmap-bubble.hp-bv{opacity:1;transform:scale(1) translateY(0)}
.hp-vmap-bubble.hp-bv:hover{transform:scale(1.06);z-index:20}
.hp-vmap-bubble.strong{background:rgba(52,211,153,0.20);color:#34D399;border:1px solid rgba(52,211,153,0.35);box-shadow:0 0 20px rgba(52,211,153,0.10)}
.hp-vmap-bubble.good{background:rgba(52,211,153,0.13);color:#6EE7B7;border:1px solid rgba(52,211,153,0.22);box-shadow:0 0 16px rgba(52,211,153,0.06)}
.hp-vmap-bubble.avg{background:rgba(255,181,71,0.13);color:#FFB547;border:1px solid rgba(255,181,71,0.22);box-shadow:0 0 16px rgba(255,181,71,0.05)}
.hp-vmap-bubble.poor{background:rgba(248,113,113,0.13);color:#F87171;border:1px solid rgba(248,113,113,0.22);box-shadow:0 0 16px rgba(248,113,113,0.05)}
.hp-vmap-bubble .bname{font-size:12px;font-weight:700;white-space:nowrap}
.hp-vmap-bubble .broi-tag{font-size:10px;opacity:0.8;font-weight:500;margin-top:2px}
.hp-vmap-tip{position:absolute;bottom:calc(100% + 10px);left:50%;transform:translateX(-50%);width:240px;background:#131B2E;border:1px solid rgba(0,212,255,0.2);border-radius:12px;padding:14px 16px;text-align:left;opacity:0;pointer-events:none;transition:opacity 0.2s;z-index:30;box-shadow:0 8px 32px rgba(0,0,0,0.4)}
.hp-vmap-bubble:hover .hp-vmap-tip{opacity:1}
.hp-vmap-tip-uni{font-size:13px;font-weight:700;color:#F0F2F5;margin-bottom:2px}
.hp-vmap-tip-prog{font-size:11px;color:#94A3B8;margin-bottom:10px}
.hp-vmap-tip-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px 12px;margin-bottom:10px}
.hp-vmap-tip-label{font-size:10px;color:#64748B;text-transform:uppercase;letter-spacing:0.5px}
.hp-vmap-tip-val{font-size:13px;font-weight:600;color:#F0F2F5}
.hp-vmap-tip-payback{font-size:11px;color:#00D4FF;font-weight:500;border-top:1px solid rgba(255,255,255,0.06);padding-top:8px}
.hp-vmap-empty{display:flex;align-items:center;justify-content:center;height:100%;color:#475569;font-size:15px;text-align:center;padding:0 32px}
.hp-vmap-note{font-size:11px;color:#475569;text-align:center;max-width:800px;margin:0 auto;line-height:1.5;padding:0 20px}
@media(max-width:768px){.hp-vmap-bubble{padding:5px 8px;border-radius:8px}.hp-vmap-bubble .bname{font-size:10px}.hp-vmap-bubble .broi-tag{font-size:9px}.hp-vmap-tip{width:200px;padding:10px 12px;left:0;transform:none}}
.hp-act3-big{font-size:22px;font-weight:600;color:#F0F2F5;margin-bottom:16px;line-height:1.3}
@media(max-width:768px){.hp-act3-big{font-size:17px}}
.hp-act3-sub{font-size:16px;color:#94A3B8;line-height:1.6}
@media(max-width:768px){.hp-act3-sub{font-size:14px}}

/* Act 4: The Platform */
.hp-act4{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:100px 32px;background:#0F1629;text-align:center}
@media(max-width:768px){.hp-act4{padding:64px 20px;min-height:auto}}
.hp-act4-head{font-size:36px;font-weight:700;color:#F0F2F5;margin-bottom:64px;letter-spacing:-0.5px}
@media(max-width:768px){.hp-act4-head{font-size:24px;margin-bottom:40px}}
.hp-journey{display:flex;align-items:flex-start;gap:0;max-width:1000px;margin:0 auto;position:relative}
@media(max-width:768px){.hp-journey{flex-direction:column;gap:0;align-items:stretch}}
.hp-phase{flex:1;text-align:center;position:relative;padding:0 12px}
@media(max-width:768px){.hp-phase{display:flex;align-items:flex-start;gap:16px;text-align:left;padding:0 0 32px}}
.hp-phase-dot{width:16px;height:16px;border-radius:50%;background:#00D4FF;margin:0 auto 12px;position:relative;z-index:2;box-shadow:0 0 20px rgba(0,212,255,0.3)}
@media(max-width:768px){.hp-phase-dot{margin:4px 0 0;flex-shrink:0}}
.hp-phase.dim .hp-phase-dot{background:#64748B;box-shadow:none}
.hp-phase-line{position:absolute;top:8px;left:calc(50% + 8px);right:calc(-50% + 8px);height:2px;background:rgba(0,212,255,0.15);z-index:1}
@media(max-width:768px){.hp-phase-line{display:none}}
.hp-phase:last-child .hp-phase-line{display:none}
.hp-phase-content{position:relative}
@media(max-width:768px){.hp-phase-content{flex:1}}
.hp-phase-name{font-size:14px;font-weight:600;color:#F0F2F5;margin-bottom:6px}
.hp-phase.dim .hp-phase-name{color:#64748B}
.hp-phase-desc{font-size:12px;color:#94A3B8;line-height:1.5}
.hp-phase.dim .hp-phase-desc{color:#4A5568}
.hp-phase-badge{display:inline-block;font-size:10px;color:#64748B;border:1px solid rgba(255,255,255,0.06);border-radius:4px;padding:2px 6px;margin-top:6px;font-weight:500}

/* Act 5: Social Proof */
.hp-act5{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:100px 32px;background:#0A0F1C;text-align:center}
@media(max-width:768px){.hp-act5{padding:64px 20px;min-height:auto}}
.hp-act5-head{font-size:32px;font-weight:600;color:#F0F2F5;margin-bottom:56px;letter-spacing:-0.5px}
@media(max-width:768px){.hp-act5-head{font-size:22px;margin-bottom:36px}}
.hp-data-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:24px;max-width:900px;margin:0 auto 56px;width:100%}
@media(max-width:768px){.hp-data-cards{grid-template-columns:1fr;gap:16px}}
.hp-data-card{background:#151C2F;border:1px solid rgba(255,255,255,0.06);border-radius:16px;padding:32px 24px;transition:border-color 0.3s,box-shadow 0.3s}
.hp-data-card:hover{border-color:rgba(0,212,255,0.3);box-shadow:0 0 30px rgba(0,212,255,0.06)}
.hp-data-val{font-size:40px;font-weight:700;margin-bottom:8px;line-height:1}
@media(max-width:768px){.hp-data-val{font-size:32px}}
.hp-data-val.teal{color:#00D4FF}.hp-data-val.amber{color:#FFB547}.hp-data-val.green{color:#34D399}
.hp-data-lab{font-size:14px;color:#94A3B8;line-height:1.5}
.hp-quotes{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;max-width:900px;margin:0 auto 24px;width:100%}
@media(max-width:768px){.hp-quotes{grid-template-columns:1fr;gap:14px}}
.hp-quote{background:#151C2F;border:1px solid rgba(255,255,255,0.06);border-radius:14px;padding:24px;text-align:left}
.hp-quote-text{font-size:14px;color:#94A3B8;line-height:1.7;margin-bottom:14px;font-style:italic}
.hp-quote-who{font-size:12px;color:#64748B}
.hp-disc{font-size:11px;color:#4A5568;font-style:italic}

/* Act 6: Final CTA */
.hp-act6{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:40px 32px;background:linear-gradient(170deg,#0F1629 0%,#0A0F1C 100%);position:relative}
.hp-act6::before{content:'';position:absolute;top:40%;left:50%;width:500px;height:500px;transform:translate(-50%,-50%);background:radial-gradient(circle,rgba(0,212,255,0.05) 0%,transparent 70%);pointer-events:none}
.hp-act6-head{font-size:48px;font-weight:700;color:#F0F2F5;letter-spacing:-1px;margin-bottom:36px;position:relative;z-index:1}
@media(max-width:768px){.hp-act6-head{font-size:30px}}
.hp-act6-btn{padding:18px 48px;border-radius:14px;border:none;background:linear-gradient(135deg,#00D4FF,#0096B4);color:#fff;font-family:'Sora',sans-serif;font-size:18px;font-weight:600;cursor:pointer;transition:all 0.3s;position:relative;z-index:1;box-shadow:0 0 40px rgba(0,212,255,0.15)}
.hp-act6-btn:hover{transform:translateY(-2px);box-shadow:0 16px 48px rgba(0,212,255,0.3)}
.hp-act6-muted{font-size:14px;color:#64748B;margin-top:24px;position:relative;z-index:1}
.hp-act6-parent{font-size:14px;color:#94A3B8;margin-top:12px;position:relative;z-index:1;cursor:pointer;background:none;border:none;font-family:'Sora',sans-serif;transition:color 0.2s}
.hp-act6-parent:hover{color:#00D4FF}

/* Footer */
.hp-footer{background:#0A0F1C;border-top:1px solid rgba(255,255,255,0.06);padding:40px 32px;text-align:center}
.hp-footer-brand{font-size:13px;color:#4A5568;margin-bottom:6px}
.hp-footer-note{font-size:11px;color:#374151;line-height:1.5}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useRef, useEffect } = React;

const API_ENDPOINT = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') ? null : '/.netlify/functions/chat';

const PROGRAMMES = [
  {id:"P001",uni:"University of Manchester",name:"BSc Business Management",subject:"Business",duration:3,foundation:false,fee:28500,city:"Manchester",region:"North West",qsRank:32,ielts:6.5,aLevel:"AAB",empRate:92,highSkill:71,salary:26000,satisfaction:82,continuation:94,intlPct:42,accreditations:"AACSB, EQUIS, AMBA",scholarship:"Global Futures: Â£5,000/yr",scholarshipVal:5000,livingCost:12000},
  {id:"P002",uni:"University of Manchester",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:30000,city:"Manchester",region:"North West",qsRank:32,ielts:6.5,aLevel:"A*AA",empRate:95,highSkill:78,salary:30000,satisfaction:80,continuation:95,intlPct:38,accreditations:"BCS",scholarship:"Dept scholarship: Â£3,000",scholarshipVal:3000,livingCost:12000},
  {id:"P003",uni:"University of Leeds",name:"BA Business Management",subject:"Business",duration:3,foundation:false,fee:27250,city:"Leeds",region:"Yorkshire",qsRank:75,ielts:6.5,aLevel:"AAB",empRate:90,highSkill:68,salary:25000,satisfaction:84,continuation:93,intlPct:35,accreditations:"AACSB, EQUIS, AMBA",scholarship:"Excellence: Â£5,000",scholarshipVal:5000,livingCost:10500},
  {id:"P004",uni:"University of Leeds",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:28750,city:"Leeds",region:"Yorkshire",qsRank:75,ielts:6.5,aLevel:"AAA",empRate:93,highSkill:75,salary:28500,satisfaction:81,continuation:94,intlPct:30,accreditations:"BCS",scholarship:"Faculty: Â£3,000",scholarshipVal:3000,livingCost:10500},
  {id:"P005",uni:"University of Exeter",name:"BSc Business and Management",subject:"Business",duration:3,foundation:false,fee:23700,city:"Exeter",region:"South West",qsRank:153,ielts:6.5,aLevel:"AAB",empRate:89,highSkill:67,salary:25500,satisfaction:86,continuation:95,intlPct:30,accreditations:"AACSB, EQUIS",scholarship:"Global Excellence: up to Â£10,000",scholarshipVal:10000,livingCost:10000},
  {id:"P006",uni:"University of Exeter",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:28500,city:"Exeter",region:"South West",qsRank:153,ielts:6.5,aLevel:"AAA",empRate:92,highSkill:74,salary:28000,satisfaction:83,continuation:94,intlPct:25,accreditations:"BCS",scholarship:null,scholarshipVal:0,livingCost:10000},
  {id:"P007",uni:"University of Sussex",name:"BSc Business and Management Studies",subject:"Business",duration:3,foundation:false,fee:20000,city:"Brighton",region:"South East",qsRank:218,ielts:6.5,aLevel:"ABB",empRate:87,highSkill:62,salary:24000,satisfaction:79,continuation:90,intlPct:40,accreditations:null,scholarship:"Chancellor's Intl: Â£5,000",scholarshipVal:5000,livingCost:11000},
  {id:"P008",uni:"University of Sussex",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:22500,city:"Brighton",region:"South East",qsRank:218,ielts:6.5,aLevel:"ABB",empRate:91,highSkill:72,salary:27000,satisfaction:78,continuation:91,intlPct:35,accreditations:"BCS",scholarship:"Chancellor's Intl: Â£5,000",scholarshipVal:5000,livingCost:11000},
  {id:"P009",uni:"University of Glasgow",name:"BAcc/MA Business & Management",subject:"Business",duration:4,foundation:false,fee:25750,city:"Glasgow",region:"Scotland",qsRank:78,ielts:6.5,aLevel:"AAB-ABB",empRate:91,highSkill:70,salary:25000,satisfaction:85,continuation:93,intlPct:32,accreditations:"AACSB, EQUIS, AMBA",scholarship:"Excellence Award: Â£5,000",scholarshipVal:5000,livingCost:10000},
  {id:"P010",uni:"University of Glasgow",name:"BSc Computing Science",subject:"Computing",duration:4,foundation:false,fee:28420,city:"Glasgow",region:"Scotland",qsRank:78,ielts:6.5,aLevel:"AAB",empRate:94,highSkill:77,salary:29000,satisfaction:82,continuation:94,intlPct:28,accreditations:"BCS",scholarship:"Excellence Award: Â£5,000",scholarshipVal:5000,livingCost:10000},
  {id:"P011",uni:"Coventry University",name:"BA Business Management",subject:"Business",duration:3,foundation:false,fee:16800,city:"Coventry",region:"West Midlands",qsRank:571,ielts:6.0,aLevel:"BCC-BBC",empRate:85,highSkill:55,salary:22000,satisfaction:80,continuation:88,intlPct:48,accreditations:"CMI",scholarship:"Up to Â£2,000",scholarshipVal:2000,livingCost:9500},
  {id:"P012",uni:"Coventry University",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:18600,city:"Coventry",region:"West Midlands",qsRank:571,ielts:6.0,aLevel:"BCC-BBC",empRate:88,highSkill:65,salary:25000,satisfaction:77,continuation:87,intlPct:42,accreditations:"BCS",scholarship:"Up to Â£2,000",scholarshipVal:2000,livingCost:9500},
  {id:"P013",uni:"University of Nottingham",name:"BSc Business Management",subject:"Business",duration:3,foundation:false,fee:23760,city:"Nottingham",region:"East Midlands",qsRank:100,ielts:6.5,aLevel:"AAB",empRate:90,highSkill:69,salary:25500,satisfaction:83,continuation:94,intlPct:38,accreditations:"AACSB, EQUIS",scholarship:"Developing Solutions: up to 100% fees",scholarshipVal:23760,livingCost:10000},
  {id:"P014",uni:"University of Nottingham",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:28600,city:"Nottingham",region:"East Midlands",qsRank:100,ielts:6.5,aLevel:"A*AA",empRate:94,highSkill:76,salary:29500,satisfaction:81,continuation:95,intlPct:32,accreditations:"BCS",scholarship:"Developing Solutions: up to 100% fees",scholarshipVal:28600,livingCost:10000},
  {id:"P015",uni:"University of Salford",name:"BSc Business Management",subject:"Business",duration:3,foundation:false,fee:15600,city:"Salford",region:"North West",qsRank:801,ielts:6.0,aLevel:"BCC-CCC",empRate:83,highSkill:50,salary:21500,satisfaction:76,continuation:85,intlPct:35,accreditations:null,scholarship:"VC Scholarship: Â£3,000",scholarshipVal:3000,livingCost:10500},
  {id:"P016",uni:"University of Salford",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:16500,city:"Salford",region:"North West",qsRank:801,ielts:6.0,aLevel:"BCC-CCC",empRate:86,highSkill:62,salary:24000,satisfaction:74,continuation:84,intlPct:30,accreditations:"BCS",scholarship:"VC Scholarship: Â£3,000",scholarshipVal:3000,livingCost:10500},
  {id:"P017",uni:"Newcastle University",name:"BSc Business Management",subject:"Business",duration:3,foundation:false,fee:24300,city:"Newcastle",region:"North East",qsRank:110,ielts:6.5,aLevel:"AAB",empRate:91,highSkill:68,salary:25000,satisfaction:85,continuation:94,intlPct:30,accreditations:"AACSB, EQUIS, AMBA",scholarship:"Intl Scholarship: Â£3,000",scholarshipVal:3000,livingCost:9500},
  {id:"P018",uni:"Newcastle University",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:28400,city:"Newcastle",region:"North East",qsRank:110,ielts:6.5,aLevel:"AAA",empRate:93,highSkill:75,salary:28500,satisfaction:82,continuation:95,intlPct:25,accreditations:"BCS",scholarship:"Intl Scholarship: Â£3,000",scholarshipVal:3000,livingCost:9500},
  {id:"P019",uni:"De Montfort University",name:"BA Business Management",subject:"Business",duration:3,foundation:false,fee:15750,city:"Leicester",region:"East Midlands",qsRank:801,ielts:6.0,aLevel:"BCC-CCC",empRate:84,highSkill:52,salary:21000,satisfaction:78,continuation:86,intlPct:45,accreditations:"CMI",scholarship:"VC Scholarship: Â£2,500",scholarshipVal:2500,livingCost:9000},
  {id:"P020",uni:"De Montfort University",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:15750,city:"Leicester",region:"East Midlands",qsRank:801,ielts:6.0,aLevel:"BCC-CCC",empRate:87,highSkill:63,salary:24000,satisfaction:75,continuation:85,intlPct:40,accreditations:"BCS",scholarship:"VC Scholarship: Â£2,500",scholarshipVal:2500,livingCost:9000},
  {id:"P021",uni:"University of Manchester",name:"BSc Business Management with Foundation Year",subject:"Business",duration:4,foundation:true,fee:22000,city:"Manchester",region:"North West",qsRank:32,ielts:5.5,aLevel:"CCC-CCD",empRate:92,highSkill:71,salary:26000,satisfaction:82,continuation:91,intlPct:55,accreditations:"AACSB, EQUIS, AMBA",scholarship:"Foundation bursary: Â£2,000",scholarshipVal:2000,livingCost:12000},
  {id:"P022",uni:"University of Sussex",name:"BSc Computer Science with Foundation Year",subject:"Computing",duration:4,foundation:true,fee:18000,city:"Brighton",region:"South East",qsRank:218,ielts:5.5,aLevel:"CCC-CCD",empRate:91,highSkill:72,salary:27000,satisfaction:78,continuation:88,intlPct:45,accreditations:"BCS",scholarship:"Chancellor's Intl: Â£5,000",scholarshipVal:5000,livingCost:11000},
  {id:"P023",uni:"Coventry University",name:"BA Business Management with Foundation Year",subject:"Business",duration:4,foundation:true,fee:16800,city:"Coventry",region:"West Midlands",qsRank:571,ielts:5.5,aLevel:"CDD-DDD",empRate:85,highSkill:55,salary:22000,satisfaction:80,continuation:85,intlPct:55,accreditations:"CMI",scholarship:"Up to Â£2,000",scholarshipVal:2000,livingCost:9500},
  {id:"P024",uni:"University of Nottingham",name:"BSc Computer Science with Foundation Year",subject:"Computing",duration:4,foundation:true,fee:22000,city:"Nottingham",region:"East Midlands",qsRank:100,ielts:5.5,aLevel:"BCC-CCC",empRate:94,highSkill:76,salary:29500,satisfaction:81,continuation:92,intlPct:45,accreditations:"BCS",scholarship:"Developing Solutions: up to 100% fees",scholarshipVal:22000,livingCost:10000},
  {id:"P025",uni:"De Montfort University",name:"BSc Computer Science with Foundation Year",subject:"Computing",duration:4,foundation:true,fee:15750,city:"Leicester",region:"East Midlands",qsRank:801,ielts:5.5,aLevel:"DDD-DD",empRate:87,highSkill:63,salary:24000,satisfaction:75,continuation:82,intlPct:50,accreditations:"BCS",scholarship:"VC Scholarship: Â£2,500",scholarshipVal:2500,livingCost:9000},
  {id:"P026",uni:"University of Birmingham",name:"BSc Business Management",subject:"Business",duration:3,foundation:false,fee:24120,city:"Birmingham",region:"West Midlands",qsRank:80,ielts:6.5,aLevel:"AAA-AAB",empRate:91,highSkill:70,salary:26000,satisfaction:84,continuation:95,intlPct:35,accreditations:"AACSB, EQUIS, AMBA",scholarship:"Birmingham Scholarship: Â£2,000",scholarshipVal:2000,livingCost:10500},
  {id:"P027",uni:"University of Birmingham",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:28800,city:"Birmingham",region:"West Midlands",qsRank:80,ielts:6.5,aLevel:"A*AA",empRate:94,highSkill:77,salary:29500,satisfaction:82,continuation:96,intlPct:30,accreditations:"BCS",scholarship:"Birmingham Scholarship: Â£2,000",scholarshipVal:2000,livingCost:10500},
  {id:"P028",uni:"University of Sheffield",name:"BSc Business Management",subject:"Business",duration:3,foundation:false,fee:23250,city:"Sheffield",region:"Yorkshire",qsRank:105,ielts:6.5,aLevel:"AAB",empRate:90,highSkill:67,salary:25000,satisfaction:83,continuation:93,intlPct:33,accreditations:"AACSB, EQUIS, AMBA",scholarship:"Intl Merit: 25-50% of fees",scholarshipVal:11625,livingCost:9500},
  {id:"P029",uni:"University of Sheffield",name:"BSc Computer Science",subject:"Computing",duration:3,foundation:false,fee:28500,city:"Sheffield",region:"Yorkshire",qsRank:105,ielts:6.5,aLevel:"AAA",empRate:93,highSkill:76,salary:29000,satisfaction:80,continuation:94,intlPct:28,accreditations:"BCS",scholarship:"Intl Merit: 25-50% of fees",scholarshipVal:14250,livingCost:9500},
  {id:"P030",uni:"University of Salford",name:"BSc Business Management with Foundation Year",subject:"Business",duration:4,foundation:true,fee:15600,city:"Salford",region:"North West",qsRank:801,ielts:5.5,aLevel:"DDD-DD",empRate:83,highSkill:50,salary:21500,satisfaction:76,continuation:82,intlPct:42,accreditations:null,scholarship:"VC Scholarship: Â£3,000",scholarshipVal:3000,livingCost:10500}
];

const COUNTRIES_DATA = {"Nigeria":{quals:"WAEC/NECO O-Levels, UTME",ieltsRange:"5.0-6.5",budgetSens:"High",englishLevel:"Moderate",flightCost:650,visaCost:490,ihsCost:1035,communityFactor:"Strong Nigerian student communities at Coventry, DMU, Manchester, Nottingham"},"India":{quals:"CBSE/ISC Class 12",ieltsRange:"5.5-7.0",budgetSens:"High",englishLevel:"Moderate-High",flightCost:550,visaCost:490,ihsCost:1035,communityFactor:"Large Indian student populations at Birmingham, Manchester, Sheffield, Glasgow"},"China":{quals:"Gaokao, A-Levels",ieltsRange:"5.0-6.5",budgetSens:"Moderate",englishLevel:"Low-Moderate",flightCost:750,visaCost:490,ihsCost:1035,communityFactor:"Established Chinese communities at Manchester, Glasgow, Birmingham, Nottingham"},"Pakistan":{quals:"HSC/Intermediate, A-Levels",ieltsRange:"5.0-6.5",budgetSens:"High",englishLevel:"Moderate",flightCost:500,visaCost:490,ihsCost:1035,communityFactor:"Strong Pakistani communities at Manchester, Leeds, Coventry"},"Bangladesh":{quals:"HSC, A-Levels",ieltsRange:"5.0-6.0",budgetSens:"Very High",englishLevel:"Low-Moderate",flightCost:600,visaCost:490,ihsCost:1035,communityFactor:"Growing communities at Coventry, DMU Leicester, Salford"},"Ghana":{quals:"WASSCE, A-Levels",ieltsRange:"5.0-6.5",budgetSens:"High",englishLevel:"Moderate",flightCost:600,visaCost:490,ihsCost:1035,communityFactor:"Active Ghanaian societies at many UK universities"},"Saudi Arabia":{quals:"Tawjihi",ieltsRange:"5.0-6.0",budgetSens:"Low (if gov sponsored)",englishLevel:"Low",flightCost:450,visaCost:490,ihsCost:1035,communityFactor:"Islamic societies and prayer facilities at most UK universities"},"Vietnam":{quals:"High School Diploma",ieltsRange:"5.0-6.0",budgetSens:"High",englishLevel:"Low",flightCost:700,visaCost:490,ihsCost:1035,communityFactor:"Growing Vietnamese communities at Manchester, Leeds, Glasgow"},"Kenya":{quals:"KCSE Certificate",ieltsRange:"5.5-6.5",budgetSens:"High",englishLevel:"Moderate-High",flightCost:550,visaCost:490,ihsCost:1035,communityFactor:"Kenyan student networks at Nottingham, Manchester, Leeds, Newcastle"},"Turkey":{quals:"Lise Diplomasi",ieltsRange:"5.0-6.5",budgetSens:"Moderate",englishLevel:"Moderate",flightCost:250,visaCost:490,ihsCost:1035,communityFactor:"Turkish societies at many Russell Group universities"}};

const OUTCOME_SIMS = {"Nigeria":{high:{empRate:88,salary:24500,highSkill:65,note:"Nigerian graduates from top-50 UK unis report strong outcomes in finance and consulting"},mid:{empRate:84,salary:22000,highSkill:58,note:"Many Nigerian graduates from mid-ranked UK unis enter management and operations roles"},accessible:{empRate:80,salary:20000,highSkill:48,note:"Nigerian graduates from accessible unis often pursue further study or enter SME management"}},"India":{high:{empRate:91,salary:28000,highSkill:72,note:"Indian graduates from top-50 UK unis are highly sought after in tech and financial services"},mid:{empRate:87,salary:25000,highSkill:64,note:"Indian graduates from mid-ranked UK unis report strong outcomes in IT and business analytics"},accessible:{empRate:83,salary:22000,highSkill:55,note:"Indian graduates from accessible unis often find roles in IT support, operations, and consulting"}},"China":{high:{empRate:85,salary:26000,highSkill:68,note:"Chinese graduates from top-50 UK unis often return to China with strong salary premiums"},mid:{empRate:81,salary:23000,highSkill:60,note:"Chinese graduates from mid-ranked UK unis report good outcomes in finance and marketing"},accessible:{empRate:77,salary:20500,highSkill:50,note:"Chinese graduates from accessible unis often leverage UK degree for roles at multinationals in China"}},"Pakistan":{high:{empRate:87,salary:24000,highSkill:63,note:"Pakistani graduates from top-50 UK unis find opportunities in banking, consulting and tech"},mid:{empRate:83,salary:21500,highSkill:56,note:"Pakistani graduates from mid-ranked UK unis often enter business management and IT roles"},accessible:{empRate:79,salary:19500,highSkill:47,note:"Pakistani graduates from accessible unis pursue roles in administration, marketing, and IT support"}}};
const DEFAULT_OUTCOME = {high:{empRate:87,salary:25000,highSkill:66,note:"International graduates from top UK universities report strong employment outcomes"},mid:{empRate:83,salary:22500,highSkill:58,note:"International graduates from mid-ranked universities enter diverse professional roles"},accessible:{empRate:79,salary:20000,highSkill:49,note:"International graduates from accessible universities benefit from UK work experience via Graduate Route"}};

function getOutcome(c, r) { const d = OUTCOME_SIMS[c] || DEFAULT_OUTCOME; if (r <= 120) return d.high; if (r <= 400) return d.mid; return d.accessible; }
function getTotalCost(p, c) { const cd = COUNTRIES_DATA[c]; const fl = cd ? cd.flightCost : 600; const ihs = cd ? cd.ihsCost : 1035; const sv = p.scholarshipVal || 0; return { annual: p.fee + p.livingCost - sv, total: (p.fee + p.livingCost - sv) * p.duration + fl + 490 + ihs * p.duration, flight: fl, visa: 490, ihs, totalBefore: (p.fee + p.livingCost + ihs) * p.duration + fl + 490 }; }
function getElig(p, s) { const i = parseFloat(s); if (isNaN(i)) return { st:"unk", label:"IELTS needed", cls:"elig-unk" }; if (i >= p.ielts) return { st:"ok", label:"Direct entry", cls:"elig-direct" }; if (i >= p.ielts - 0.5) return { st:"cond", label:"Conditional â€” may need pre-sessional English", cls:"elig-cond" }; return { st:"low", label:"Below requirement â€” foundation year or IELTS retake needed", cls:"elig-below" }; }

const COUNTRY_LIST = ["Nigeria","India","China","Pakistan","Bangladesh","Ghana","Saudi Arabia","Vietnam","Kenya","Turkey","Brazil","Indonesia","Thailand","Malaysia","Sri Lanka","Nepal","Egypt","Iran","Colombia","Mexico","Philippines","South Korea","Japan","Taiwan","Hong Kong","UAE","Kuwait","Oman","Qatar","Jordan","Other"];

function buildSys(p) {
  const cd = COUNTRIES_DATA[p.country];
  const progs = PROGRAMMES.map(x => ({id:x.id,uni:x.uni,name:x.name,subject:x.subject,fee:x.fee,city:x.city,qsRank:x.qsRank,ielts:x.ielts,aLevel:x.aLevel,empRate:x.empRate,highSkill:x.highSkill,salary:x.salary,satisfaction:x.satisfaction,foundation:x.foundation,duration:x.duration,scholarship:x.scholarship,scholarshipVal:x.scholarshipVal,livingCost:x.livingCost}));
  return "You are PathfinderAI, an expert university advisor helping international students find the right UK undergraduate programme. You work for the STUDENT, not the universities. You are warm, honest, and genuinely invested.\n\nSTUDENT PROFILE:\n- Country: " + p.country + "\n- Subject: " + p.subject + "\n- Qualifications: " + p.qualifications + "\n- IELTS: " + (p.ielts || "Not yet taken") + "\n- Budget: " + p.budget + "\n- Priorities: " + p.priorities + (cd ? "\n\nCOUNTRY CONTEXT:\n- Typical quals: " + cd.quals + "\n- IELTS range: " + cd.ieltsRange + "\n- Budget sensitivity: " + cd.budgetSens + "\n- Community: " + cd.communityFactor + "\n- Flight: Â£" + cd.flightCost + ", Visa: Â£" + cd.visaCost + ", IHS/yr: Â£" + cd.ihsCost : "") + "\n\nPROGRAMME DATABASE:\n" + JSON.stringify(progs) + "\n\nRULES:\n1. Start by acknowledging the student and asking 1-2 clarifying questions. Do NOT recommend in your first message.\n2. When ready, include: |||PROGRAMMES|||[\"P001\",\"P013\"]|||END|||\n3. Be OUTCOME-LED. Reference employment rates, salaries, what students from their country experience.\n4. Be HONEST about trade-offs.\n5. Consider TOTAL COST: fees + living + visa + IHS + flights - scholarship.\n6. Suggest foundation year if IELTS/quals are below direct entry.\n7. Reference country context and community.\n8. Mention the 2-year Graduate Route visa.\n9. Keep under 300 words. Be conversational.\n10. Never recommend based on university payments. You work for the student.";
}

function parseMsg(text) {
  const m = text.match(/\|\|\|PROGRAMMES\|\|\|(.*?)\|\|\|END\|\|\|/s);
  let progs = []; let clean = text;
  if (m) { try { progs = JSON.parse(m[1]); } catch(e) {} clean = text.replace(/\|\|\|PROGRAMMES\|\|\|.*?\|\|\|END\|\|\|/s, '').trim(); }
  return { text: clean, programmes: progs };
}

function ProgrammeCard({ progId, country, ielts }) {
  const [tab, setTab] = useState('outcomes');
  const p = PROGRAMMES.find(x => x.id === progId);
  if (!p) return null;
  const el = getElig(p, ielts);
  const oc = getOutcome(country, p.qsRank);
  const tc = getTotalCost(p, country);
  const tier = p.qsRank <= 120 ? 'top-tier' : p.qsRank <= 400 ? 'mid-ranked' : 'accessible';
  const sv = p.scholarshipVal || 0;

  return (
    <div className="pcard">
      <div className="pc-top">
        <div className="pc-header">
          <span className="pc-uni">{p.uni}</span>
          <span className="pc-rank">QS #{p.qsRank}</span>
        </div>
        <div className="pc-name">{p.name}</div>
        <div className="pc-tags">
          <span className="pc-tag t-fee">{"Â£" + p.fee.toLocaleString() + "/yr"}</span>
          <span className="pc-tag t-city">{p.city}</span>
          <span className="pc-tag t-dur">{p.duration + " yrs"}</span>
          {p.foundation && <span className="pc-tag t-fnd">Foundation Year</span>}
        </div>
      </div>
      <div className={"pc-elig " + el.cls}>
        <span>{el.st === 'ok' ? 'âœ“' : el.st === 'cond' ? 'âš ' : el.st === 'low' ? 'âœ—' : '?'}</span>
        {" " + el.label}
      </div>
      <div className="pc-tabs">
        <button className={"pc-tab" + (tab === 'outcomes' ? ' on' : '')} onClick={() => setTab('outcomes')}>Outcomes</button>
        <button className={"pc-tab" + (tab === 'students' ? ' on' : '')} onClick={() => setTab('students')}>Students Like Me</button>
        <button className={"pc-tab" + (tab === 'cost' ? ' on' : '')} onClick={() => setTab('cost')}>Total Cost</button>
      </div>
      <div className="pc-panel">
        {tab === 'outcomes' && (
          <div className="pc-stats">
            <div className="ps"><div className="ps-v">{p.empRate + "%"}</div><div className="ps-l">Employed</div></div>
            <div className="ps"><div className="ps-v">{p.highSkill + "%"}</div><div className="ps-l">Graduate jobs</div></div>
            <div className="ps"><div className="ps-v">{"Â£" + (p.salary/1000).toFixed(0) + "k"}</div><div className="ps-l">Median salary</div></div>
            <div className="ps"><div className="ps-v">{p.satisfaction + "%"}</div><div className="ps-l">Satisfaction</div></div>
          </div>
        )}
        {tab === 'students' && (
          <div className="slm-box">
            <div className="slm-title"><span>ðŸ‘¤</span>{" " + (country || 'International') + " graduates from " + tier + " UK universities"}</div>
            <div className="slm-stats">
              <div className="slm-stat"><div className="slm-v">{oc.empRate + "%"}</div><div className="slm-l">Employed</div></div>
              <div className="slm-stat"><div className="slm-v">{"Â£" + (oc.salary/1000).toFixed(1) + "k"}</div><div className="slm-l">Avg salary</div></div>
              <div className="slm-stat"><div className="slm-v">{oc.highSkill + "%"}</div><div className="slm-l">Grad-level jobs</div></div>
            </div>
            <div className="slm-note">{oc.note}</div>
          </div>
        )}
        {tab === 'cost' && (
          <div className="tc-box">
            <div className="tc-title"><span>ðŸ’°</span>{" Total cost of attendance (" + p.duration + " years)"}</div>
            <div className="tc-rows">
              <div className="tc-row"><span>{"Tuition (" + p.duration + " yrs)"}</span><span>{"Â£" + (p.fee * p.duration).toLocaleString()}</span></div>
              <div className="tc-row"><span>{"Living costs (" + p.duration + " yrs)"}</span><span>{"Â£" + (p.livingCost * p.duration).toLocaleString()}</span></div>
              <div className="tc-row sub"><span>Visa</span><span>{"Â£" + tc.visa}</span></div>
              <div className="tc-row sub"><span>{"IHS (" + p.duration + " yrs)"}</span><span>{"Â£" + (tc.ihs * p.duration).toLocaleString()}</span></div>
              <div className="tc-row sub"><span>Est. flights</span><span>{"Â£" + tc.flight}</span></div>
              <div className="tc-divider"></div>
              <div className="tc-row tc-total"><span>Total before scholarship</span><span>{"Â£" + tc.totalBefore.toLocaleString()}</span></div>
              {sv > 0 && <div className="tc-row" style={{color:'#059669'}}><span>{"Scholarship (" + p.duration + " yrs)"}</span><span>{"-Â£" + (sv * p.duration).toLocaleString()}</span></div>}
              {sv > 0 && <div className="tc-divider"></div>}
              {sv > 0 && <div className="tc-row tc-total"><span>Total after scholarship</span><span>{"Â£" + tc.total.toLocaleString()}</span></div>}
            </div>
            {p.scholarship && <div className="tc-schol"><span>ðŸŽ“</span>{" " + p.scholarship}</div>}
          </div>
        )}
      </div>
    </div>
  );
}

// Homepage data â€” country/subject stats for Act 2
const HP_STATS = {
  "Nigeria": { "Business": { emp: 84, salary: "Â£22,000", premium: "2.8x", grad: 58 }, "Computer Science": { emp: 87, salary: "Â£25,000", premium: "3.2x", grad: 64 } },
  "India": { "Business": { emp: 87, salary: "Â£25,000", premium: "3.5x", grad: 64 }, "Computer Science": { emp: 91, salary: "Â£28,000", premium: "3.1x", grad: 72 } },
  "China": { "Business": { emp: 81, salary: "Â£23,000", premium: "2.2x", grad: 60 }, "Computer Science": { emp: 85, salary: "Â£26,000", premium: "2.5x", grad: 68 } },
  "Pakistan": { "Business": { emp: 83, salary: "Â£21,500", premium: "3.8x", grad: 56 }, "Computer Science": { emp: 87, salary: "Â£24,000", premium: "4.2x", grad: 63 } },
  "Bangladesh": { "Business": { emp: 80, salary: "Â£20,000", premium: "4.5x", grad: 50 }, "Computer Science": { emp: 84, salary: "Â£23,000", premium: "5.1x", grad: 58 } },
  "Ghana": { "Business": { emp: 82, salary: "Â£21,000", premium: "3.0x", grad: 54 }, "Computer Science": { emp: 86, salary: "Â£24,000", premium: "3.4x", grad: 62 } },
  "Kenya": { "Business": { emp: 83, salary: "Â£22,000", premium: "3.2x", grad: 57 }, "Computer Science": { emp: 87, salary: "Â£25,000", premium: "3.6x", grad: 64 } },
  "Saudi Arabia": { "Business": { emp: 79, salary: "Â£22,000", premium: "1.4x", grad: 52 }, "Computer Science": { emp: 83, salary: "Â£25,000", premium: "1.6x", grad: 60 } },
  "Vietnam": { "Business": { emp: 81, salary: "Â£21,000", premium: "4.8x", grad: 53 }, "Computer Science": { emp: 85, salary: "Â£24,000", premium: "5.5x", grad: 61 } },
  "Turkey": { "Business": { emp: 82, salary: "Â£22,000", premium: "2.6x", grad: 55 }, "Computer Science": { emp: 86, salary: "Â£25,000", premium: "2.9x", grad: 63 } },
};
const HP_DEFAULT = { "Business": { emp: 83, salary: "Â£22,000", premium: "3.0x", grad: 58 }, "Computer Science": { emp: 87, salary: "Â£25,000", premium: "3.2x", grad: 66 } };
const HP_COUNTRIES = ["Nigeria","India","China","Pakistan","Bangladesh","Ghana","Saudi Arabia","Vietnam","Kenya","Turkey"];

// Scroll animation hook
function useScrollAnim() {
  const ref = useRef(null);
  useEffect(() => {
    const el = ref.current;
    if (!el) return;
    const obs = new IntersectionObserver(([entry]) => {
      if (entry.isIntersecting) { el.classList.add('hp-visible'); obs.unobserve(el); }
    }, { threshold: 0.15 });
    obs.observe(el);
    return () => obs.disconnect();
  }, []);
  return ref;
}

function ScrollAnim({ children, className, delay }) {
  const ref = useScrollAnim();
  return <div ref={ref} className={"hp-anim" + (delay ? " hp-anim-delay-" + delay : "") + (className ? " " + className : "")}>{children}</div>;
}

function ValueMap({ country, subject }) {
  const vmRef = useRef(null);
  const [visible, setVisible] = useState(false);
  useEffect(() => {
    const el = vmRef.current;
    if (!el) return;
    const obs = new IntersectionObserver(([entry]) => {
      if (entry.isIntersecting) { setVisible(true); obs.unobserve(el); }
    }, { threshold: 0.15 });
    obs.observe(el);
    return () => obs.disconnect();
  }, []);

  const ready = country && subject;

  // ROI tier: total cost / salary â€” lower = better
  function roiTier(ratio) {
    if (ratio < 3) return { tier: 'strong', label: 'Strong ROI' };
    if (ratio < 4) return { tier: 'good', label: 'Good ROI' };
    if (ratio < 5) return { tier: 'avg', label: 'Average ROI' };
    return { tier: 'poor', label: 'Poor ROI' };
  }

  // Build bubble data only when both selected
  let positioned = [];
  if (ready) {
    const progSubject = subject === 'Computer Science' ? 'Computing' : subject;
    const filtered = PROGRAMMES.filter(p => p.subject === progSubject && !p.foundation);
    const shortName = (n) => n.replace('University of ','').replace(' University','').replace('De Montfort','DMU');

    const bubbles = filtered.map(p => {
      const tc = getTotalCost(p, country);
      const costK = Math.round(tc.total / 1000);
      const salK = p.salary / 1000;
      const ratio = tc.total / p.salary;
      const rt = roiTier(ratio);
      return { id: p.id, uni: shortName(p.uni), progName: p.name, totalCost: tc.total, costK, salary: p.salary, salK, empRate: p.empRate, ratio, tier: rt.tier, roiLabel: rt.label, duration: p.duration };
    });

    const costs = bubbles.map(b => b.totalCost);
    const salaries = bubbles.map(b => b.salary);
    const minCost = Math.min(...costs), maxCost = Math.max(...costs);
    const minSal = Math.min(...salaries), maxSal = Math.max(...salaries);
    const costRange = maxCost - minCost || 1;
    const salRange = maxSal - minSal || 1;

    positioned = bubbles.map(b => {
      const xPct = 12 + ((b.totalCost - minCost) / costRange) * 70;
      const yPct = 10 + ((maxSal - b.salary) / salRange) * 62;
      return { ...b, xPct, yPct };
    });

    // Collision detection â€” nudge overlapping bubbles
    const bw = 14, bh = 9;
    for (let pass = 0; pass < 5; pass++) {
      for (let i = 0; i < positioned.length; i++) {
        for (let j = i + 1; j < positioned.length; j++) {
          const a = positioned[i], b = positioned[j];
          const dx = Math.abs(a.xPct - b.xPct), dy = Math.abs(a.yPct - b.yPct);
          if (dx < bw && dy < bh) {
            const nudge = (bh - dy) / 2 + 1.5;
            if (a.yPct <= b.yPct) { a.yPct -= nudge; b.yPct += nudge; }
            else { a.yPct += nudge; b.yPct -= nudge; }
            a.yPct = Math.max(4, Math.min(78, a.yPct));
            b.yPct = Math.max(4, Math.min(78, b.yPct));
          }
        }
      }
    }
  }

  return (
    <div className="hp-vmap" ref={vmRef}>
      {ready ? (
        <>
          <div className="hp-vmap-label tl">âœ¦ Best value</div>
          <div className="hp-vmap-label br">Worst value âœ¦</div>
          <div className="hp-vmap-zone"></div>
          <div className="hp-vmap-axis"></div>
          <div className="hp-vmap-axis-x">Total cost â†’</div>
          <div className="hp-vmap-axis-y">Graduate salary â†’</div>
          {positioned.map((b, i) => (
            <div key={b.id}
              className={"hp-vmap-bubble " + b.tier + (visible ? " hp-bv" : "")}
              style={{ top: b.yPct.toFixed(1) + '%', left: b.xPct.toFixed(1) + '%', transitionDelay: visible ? (i * 0.06) + 's' : '0s' }}>
              <div className="bname">{b.uni}</div>
              <div className="broi-tag">{b.roiLabel}</div>
              <div className="hp-vmap-tip">
                <div className="hp-vmap-tip-uni">{b.uni}</div>
                <div className="hp-vmap-tip-prog">{b.progName}</div>
                <div className="hp-vmap-tip-grid">
                  <div><div className="hp-vmap-tip-label">Total cost ({b.duration}yr)</div><div className="hp-vmap-tip-val">{'Â£' + b.costK.toLocaleString() + 'k'}</div></div>
                  <div><div className="hp-vmap-tip-label">Median salary</div><div className="hp-vmap-tip-val">{'Â£' + b.salK.toLocaleString() + 'k'}</div></div>
                  <div><div className="hp-vmap-tip-label">Employment</div><div className="hp-vmap-tip-val">{b.empRate + '%'}</div></div>
                  <div><div className="hp-vmap-tip-label">ROI ratio</div><div className="hp-vmap-tip-val">{b.ratio.toFixed(1) + 'x'}</div></div>
                </div>
                <div className="hp-vmap-tip-payback">{'Pays back in ~' + b.ratio.toFixed(1) + ' years at starting salary'}</div>
              </div>
            </div>
          ))}
        </>
      ) : (
        <div className="hp-vmap-empty">Select a country and subject to see the value map</div>
      )}
    </div>
  );
}

function Homepage({ onStart }) {
  const [hpCountry, setHpCountry] = useState('');
  const [hpSubject, setHpSubject] = useState('');
  const [showNav, setShowNav] = useState(false);
  const act1Ref = useRef(null);

  const bothSelected = hpCountry && hpSubject;
  const d = bothSelected ? ((HP_STATS[hpCountry] || HP_DEFAULT)[hpSubject] || HP_DEFAULT[hpSubject]) : { emp: 85, salary: 'Â£24,000', premium: '3.0x', grad: 60 };

  // Sticky nav on scroll
  useEffect(() => {
    const handler = () => {
      if (act1Ref.current) {
        setShowNav(window.scrollY > act1Ref.current.offsetHeight - 80);
      }
    };
    window.addEventListener('scroll', handler, { passive: true });
    return () => window.removeEventListener('scroll', handler);
  }, []);

  return (
    <div className="hp">
      {/* Sticky nav */}
      <div className={"hp-snav" + (showNav ? " hp-snav-show" : "")}>
        <div className="hp-snav-inner">
          <div className="hp-snav-logo">
            <div className="hp-snav-sq">P</div>
            <div className="hp-snav-t">Pathfinder<span className="hi">AI</span></div>
          </div>
          <div className="hp-snav-links">
            <button className="hp-snav-link" onClick={onStart}>Get started</button>
          </div>
        </div>
      </div>

      {/* Act 1: The Hook */}
      <div className="hp-act1" ref={act1Ref}>
        <h1 className="hp-hook">What could your life<br/>look like?</h1>
        <div className="hp-inline">
          <span>I'm from</span>
          <select className="hp-inline-sel" value={hpCountry} onChange={e => setHpCountry(e.target.value)}>
            <option value="" disabled>your country</option>
            {HP_COUNTRIES.map(c => <option key={c} value={c}>{c}</option>)}
          </select>
          <span>and I want to study</span>
          <select className="hp-inline-sel" value={hpSubject} onChange={e => setHpSubject(e.target.value)}>
            <option value="" disabled>a subject</option>
            <option value="Computer Science">Computer Science</option>
            <option value="Business">Business</option>
          </select>
        </div>
        <button className={"hp-go" + (bothSelected ? " hp-go-show" : "")} onClick={onStart}>Show me &#8594;</button>
        <div className="hp-powered">Powered by data from 230,000 student journeys</div>
      </div>

      {/* Act 2: The Data Story */}
      <div className="hp-act2">
        <ScrollAnim>
          <div className="hp-act2-head">{bothSelected ? 'Students from ' + hpCountry + ' who studied ' + hpSubject + ' in the UK' : 'UK international graduates â€” average outcomes'}</div>
        </ScrollAnim>
        <div className="hp-stats">
          <ScrollAnim delay={1}>
            <div className="hp-stat">
              <div className="hp-stat-val teal">{d.emp}%</div>
              <div className="hp-stat-lab">found employment within 15 months</div>
            </div>
          </ScrollAnim>
          <ScrollAnim delay={2}>
            <div className="hp-stat">
              <div className="hp-stat-val green">{d.salary}</div>
              <div className="hp-stat-lab">median starting salary</div>
            </div>
          </ScrollAnim>
          <ScrollAnim delay={3}>
            <div className="hp-stat">
              <div className="hp-stat-val amber">{d.premium}</div>
              <div className="hp-stat-lab">salary premium vs home country average</div>
            </div>
          </ScrollAnim>
          <ScrollAnim delay={4}>
            <div className="hp-stat">
              <div className="hp-stat-val teal">{d.grad}%</div>
              <div className="hp-stat-lab">in graduate-level professional roles</div>
            </div>
          </ScrollAnim>
        </div>
        <ScrollAnim>
          <div className="hp-act2-note">Based on graduate outcome data across all UK university tiers. Your individual prediction depends on where you go.</div>
        </ScrollAnim>
      </div>

      {/* Act 3: The Stakes */}
      <div className="hp-act3">
        <ScrollAnim>
          <div className="hp-act3-head">But not all universities deliver<br/>the same outcome.</div>
        </ScrollAnim>
        <ScrollAnim>
          <div className="hp-act3-sel">
            <span>I'm from</span>
            <select value={hpCountry} onChange={e => setHpCountry(e.target.value)}>
              <option value="" disabled>your country</option>
              {HP_COUNTRIES.map(c => <option key={c} value={c}>{c}</option>)}
            </select>
            <span>and I want to study</span>
            <select value={hpSubject} onChange={e => setHpSubject(e.target.value)}>
              <option value="" disabled>a subject</option>
              <option value="Computer Science">Computer Science</option>
              <option value="Business">Business</option>
            </select>
          </div>
        </ScrollAnim>
        <ValueMap country={hpCountry} subject={hpSubject} />
        <div className="hp-vmap-note">Salary data reflects 15 months post-graduation (HESA Graduate Outcomes). Total cost includes tuition, living, visa, and health surcharge.</div>
        <ScrollAnim>
          <div className="hp-act3-big">The difference between the right choice and the wrong one? Up to Â£50,000 and a career.</div>
        </ScrollAnim>
        <ScrollAnim>
          <div className="hp-act3-sub">PathfinderAI shows you where the value is â€” before you commit.</div>
        </ScrollAnim>
      </div>

      {/* Act 4: The Platform */}
      <div className="hp-act4">
        <ScrollAnim>
          <div className="hp-act4-head">With you from first question to first job</div>
        </ScrollAnim>
        <ScrollAnim>
          <div className="hp-journey">
            <div className="hp-phase">
              <div className="hp-phase-dot"></div>
              <div className="hp-phase-line"></div>
              <div className="hp-phase-content">
                <div className="hp-phase-name">Dream</div>
                <div className="hp-phase-desc">See what's possible. Real outcomes from real students who started where you are.</div>
              </div>
            </div>
            <div className="hp-phase">
              <div className="hp-phase-dot"></div>
              <div className="hp-phase-line"></div>
              <div className="hp-phase-content">
                <div className="hp-phase-name">Plan</div>
                <div className="hp-phase-desc">AI-powered matching. Predicted outcomes, true costs, readiness scores.</div>
              </div>
            </div>
            <div className="hp-phase">
              <div className="hp-phase-dot"></div>
              <div className="hp-phase-line"></div>
              <div className="hp-phase-content">
                <div className="hp-phase-name">Prepare</div>
                <div className="hp-phase-desc">Application tracking, document prep, visa guidance, IELTS planning â€” one place for everything.</div>
              </div>
            </div>
            <div className="hp-phase dim">
              <div className="hp-phase-dot"></div>
              <div className="hp-phase-line"></div>
              <div className="hp-phase-content">
                <div className="hp-phase-name">Arrive</div>
                <div className="hp-phase-desc">City survival guides, student connections, first-week support.</div>
                <div className="hp-phase-badge">Coming soon</div>
              </div>
            </div>
            <div className="hp-phase dim">
              <div className="hp-phase-dot"></div>
              <div className="hp-phase-content">
                <div className="hp-phase-name">Thrive</div>
                <div className="hp-phase-desc">Career tracking, alumni network, your journey powers guidance for the next generation.</div>
                <div className="hp-phase-badge">Coming soon</div>
              </div>
            </div>
          </div>
        </ScrollAnim>
      </div>

      {/* Act 5: Social Proof */}
      <div className="hp-act5">
        <ScrollAnim>
          <div className="hp-act5-head">The numbers behind the guidance</div>
        </ScrollAnim>
        <div className="hp-data-cards">
          <ScrollAnim delay={1}>
            <div className="hp-data-card">
              <div className="hp-data-val teal">230,000</div>
              <div className="hp-data-lab">student journeys analysed across 180 countries</div>
            </div>
          </ScrollAnim>
          <ScrollAnim delay={2}>
            <div className="hp-data-card">
              <div className="hp-data-val amber">Â£12,400</div>
              <div className="hp-data-lab">average hidden costs students discover they didn't know about</div>
            </div>
          </ScrollAnim>
          <ScrollAnim delay={3}>
            <div className="hp-data-card">
              <div className="hp-data-val green">47%</div>
              <div className="hp-data-lab">of students we assessed could get equivalent outcomes for less money</div>
            </div>
          </ScrollAnim>
        </div>
        <div className="hp-quotes">
          <ScrollAnim delay={1}>
            <div className="hp-quote">
              <div className="hp-quote-text">"My family almost committed Â£140,000 before we saw the real numbers."</div>
              <div className="hp-quote-who">Parent, Lagos</div>
            </div>
          </ScrollAnim>
          <ScrollAnim delay={2}>
            <div className="hp-quote">
              <div className="hp-quote-text">"I was 0.5 below the IELTS requirement. Nobody told me until PathfinderAI."</div>
              <div className="hp-quote-who">Student, Karachi</div>
            </div>
          </ScrollAnim>
          <ScrollAnim delay={3}>
            <div className="hp-quote">
              <div className="hp-quote-text">"The foundation year recommendation saved my application. My agent never mentioned it."</div>
              <div className="hp-quote-who">Student, Shenzhen</div>
            </div>
          </ScrollAnim>
        </div>
        <div className="hp-disc">Sample quotes for demonstration. Platform in prototype.</div>
      </div>

      {/* Act 6: Final CTA */}
      <div className="hp-act6">
        <ScrollAnim>
          <div className="hp-act6-head">See your predicted future</div>
        </ScrollAnim>
        <ScrollAnim>
          <button className="hp-act6-btn" onClick={onStart}>Start now â€” it takes 5 minutes</button>
        </ScrollAnim>
        <ScrollAnim>
          <div className="hp-act6-muted">Free. No account needed to explore.</div>
        </ScrollAnim>
      </div>

      {/* Footer */}
      <div className="hp-footer">
        <div className="hp-footer-brand">PathfinderAI â€” a Hyphen Education Group prototype</div>
        <div className="hp-footer-note">Outcome data modelled from HESA Graduate Outcomes</div>
      </div>
    </div>
  );
}

function App() {
  const [currentView, setCurrentView] = useState('home');
  const [profile, setProfile] = useState({country:'',subject:'',qualifications:'',ielts:'',budget:'',priorities:''});
  const [msgs, setMsgs] = useState([]);
  const [input, setInput] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [selPri, setSelPri] = useState([]);
  const endRef = useRef(null);
  useEffect(() => { if (endRef.current) endRef.current.scrollIntoView({behavior:'smooth'}); }, [msgs, loading]);

  const budgets = [{l:"Under Â£20k/yr",v:"Under Â£20,000/yr total"},{l:"Â£20-30k/yr",v:"Â£20,000-Â£30,000/yr total"},{l:"Â£30-40k/yr",v:"Â£30,000-Â£40,000/yr total"},{l:"Â£40k+/yr",v:"Over Â£40,000/yr"}];
  const priorities = ["University ranking","Graduate salary","Lower fees","City life","Career support","Scholarships"];
  const togPri = (p) => setSelPri(prev => prev.includes(p) ? prev.filter(x=>x!==p) : prev.length<3 ? [...prev,p] : prev);
  const canGo = profile.country && profile.subject && profile.qualifications && profile.budget && selPri.length > 0;

  const callAI = async (history, prof) => {
    setLoading(true); setError(null);
    try {
      const endpoint = API_ENDPOINT || 'https://api.anthropic.com/v1/messages';
      const res = await fetch(endpoint, { method:"POST", headers:{"Content-Type":"application/json"}, body: JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:1000,system:buildSys(prof||profile),messages:history.map(m=>({role:m.role,content:m.content}))}) });
      const data = await res.json();
      if (data.error) { setError(data.error.message || "API error"); setLoading(false); return; }
      const text = data.content ? data.content.map(c => c.text || '').join('') : "Having trouble connecting. Please try again.";
      setMsgs(prev => [...prev, {role:'assistant', content:text, parsed:parseMsg(text)}]);
    } catch(e) { console.error(e); setError("Connection failed â€” check the Netlify function and API key."); }
    setLoading(false);
  };

  const launch = async () => {
    const fp = {...profile, priorities: selPri.join(', ')};
    setProfile(fp);
    const intro = "Hi! I'm from " + fp.country + ". I want to study " + fp.subject + " in the UK. My qualifications: " + fp.qualifications + ". " + (fp.ielts ? "IELTS: " + fp.ielts + "." : "Haven't taken IELTS yet.") + " Budget: " + fp.budget + ". Most important: " + fp.priorities + ".";
    setMsgs([{role:'user',content:intro,parsed:{text:intro,programmes:[]}}]);
    setCurrentView('chat');
    await callAI([{role:'user',content:intro}], fp);
  };

  const send = async () => {
    if (!input.trim() || loading) return;
    const nm = [...msgs, {role:'user',content:input.trim(),parsed:{text:input.trim(),programmes:[]}}];
    setMsgs(nm); setInput('');
    await callAI(nm.map(m=>({role:m.role,content:m.content})), profile);
  };

  const quick = async (t) => {
    const nm = [...msgs, {role:'user',content:t,parsed:{text:t,programmes:[]}}];
    setMsgs(nm);
    await callAI(nm.map(m=>({role:m.role,content:m.content})), profile);
  };

  const restart = () => { setCurrentView('home'); setMsgs([]); setProfile({country:'',subject:'',qualifications:'',ielts:'',budget:'',priorities:''}); setSelPri([]); setError(null); };

  // Homepage (default landing)
  if (currentView === 'home') return (
    <Homepage onStart={() => setCurrentView('profile')} />
  );

  // Profile / onboarding (existing form â€” will be replaced by Profile Builder in v2)
  if (currentView === 'profile') return (
    <div className="app"><div className="onboarding"><div className="ob-card">
      <div className="logo-row"><div className="logo-sq">P</div><div className="logo-t">Pathfinder<span className="logo-hi">AI</span></div></div>
      <div className="ob-badge">POWERED BY OUTCOME DATA</div>
      <div className="ob-sub">Honest, outcome-led guidance to find the right UK programme. We show you what actually happens to students like you â€” real graduate data, true total costs, no hidden agendas.</div>
      <div className="fg"><label className="fl">Where are you from?</label><select className="fs" value={profile.country} onChange={e => setProfile(p=>({...p,country:e.target.value}))}><option value="">Select your country</option>{COUNTRY_LIST.map(c => <option key={c} value={c}>{c}</option>)}</select></div>
      <div className="fg"><label className="fl">What do you want to study?</label><select className="fs" value={profile.subject} onChange={e => setProfile(p=>({...p,subject:e.target.value}))}><option value="">Select subject area</option><option value="Business & Management">Business & Management</option><option value="Computer Science & IT">Computer Science & IT</option><option value="Not sure yet">Not sure yet</option></select></div>
      <div className="fr">
        <div className="fg"><label className="fl">Your qualifications</label><input className="fi" placeholder="e.g. A-Levels BBB, WAEC" value={profile.qualifications} onChange={e => setProfile(p=>({...p,qualifications:e.target.value}))} /></div>
        <div className="fg"><label className="fl">IELTS score (if taken)</label><input className="fi" placeholder="e.g. 6.0 or not taken" value={profile.ielts} onChange={e => setProfile(p=>({...p,ielts:e.target.value}))} /></div>
      </div>
      <div className="fg"><label className="fl">Annual budget (fees + living)</label><div className="chips">{budgets.map(b => <button key={b.l} className={"chip"+(profile.budget===b.v?' on':'')} onClick={()=>setProfile(p=>({...p,budget:b.v}))}>{b.l}</button>)}</div></div>
      <div className="fg"><label className="fl">What matters most? (pick up to 3)</label><div className="chips">{priorities.map(p => <button key={p} className={"chip"+(selPri.includes(p)?' on':'')} onClick={()=>togPri(p)}>{p}</button>)}</div></div>
      <button className="go-btn" disabled={!canGo} onClick={launch}>Find my programmes â†’</button>
    </div></div></div>
  );

  // Chat view
  return (
    <div className="app"><div className="chat">
      <div className="ch-head">
        <div className="ch-left">
          <button className="ch-back" onClick={restart}>â† Home</button>
          <div className="ch-logo">P</div>
          <div className="ch-title">Pathfinder<span className="logo-hi">AI</span></div>
        </div>
        <div className="ch-tags"><span className="ch-trust">WORKS FOR YOU</span><span className="ch-tag">{profile.country}</span><span className="ch-tag">{profile.subject}</span></div>
      </div>
      <div className="ch-msgs">
        {msgs.map((m, i) => (
          <div key={i} className={"msg " + (m.role==='assistant'?'a':'u')}>
            <div className="msg-who">{m.role==='assistant'?'PathfinderAI':'You'}</div>
            <div className="bubble">
              {m.parsed && m.parsed.text && m.parsed.text.split('\n').map((line, j) => <span key={j}>{line}<br/></span>)}
              {m.parsed && m.parsed.programmes && m.parsed.programmes.length > 0 && (
                <div className="pcards">{m.parsed.programmes.map(pid => <ProgrammeCard key={pid} progId={pid} country={profile.country} ielts={profile.ielts} />)}</div>
              )}
            </div>
          </div>
        ))}
        {loading && <div className="msg a"><div className="msg-who">PathfinderAI</div><div className="typing"><div className="td"></div><div className="td"></div><div className="td"></div></div></div>}
        {error && <div className="err-box">{error}</div>}
        <div ref={endRef}></div>
      </div>
      <div className="ch-input">
        <div className="in-row">
          <input className="in-box" placeholder="Ask me anything about studying in the UK..." value={input} onChange={e=>setInput(e.target.value)} onKeyDown={e=>e.key==='Enter'&&send()} disabled={loading} />
          <button className="in-btn" onClick={send} disabled={loading||!input.trim()}>Send</button>
        </div>
        {msgs.length <= 2 && <div className="quicks">
          <button className="qb" onClick={()=>quick('What are the most affordable options with good outcomes?')}>Best value</button>
          <button className="qb" onClick={()=>quick('Show me the real total cost of each option')}>True total costs</button>
          <button className="qb" onClick={()=>quick('Do I need a foundation year?')}>Foundation year?</button>
          <button className="qb" onClick={()=>quick('What happened to students from my country at these universities?')}>Students like me</button>
          <button className="qb" onClick={()=>quick("Is a more expensive university worth it?")}>Worth the cost?</button>
        </div>}
      </div>
      <div className="footer">PathfinderAI prototype â€” Outcome data modelled from <a href="https://www.hesa.ac.uk" target="_blank">HESA</a> Graduate Outcomes. Not for production use.</div>
    </div></div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
